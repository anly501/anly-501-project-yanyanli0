<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.242">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>api-gathering-py</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="API gathering Py_files/libs/clipboard/clipboard.min.js"></script>
<script src="API gathering Py_files/libs/quarto-html/quarto.js"></script>
<script src="API gathering Py_files/libs/quarto-html/popper.min.js"></script>
<script src="API gathering Py_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="API gathering Py_files/libs/quarto-html/anchor.min.js"></script>
<link href="API gathering Py_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="API gathering Py_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="API gathering Py_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="API gathering Py_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="API gathering Py_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction-to-api-data-gathering" id="toc-introduction-to-api-data-gathering" class="nav-link active" data-scroll-target="#introduction-to-api-data-gathering">Introduction to API Data Gathering</a></li>
  <li><a href="#collect-tweet-data" id="toc-collect-tweet-data" class="nav-link" data-scroll-target="#collect-tweet-data">Collect Tweet Data</a>
  <ul class="collapse">
  <li><a href="#set-up-the-token" id="toc-set-up-the-token" class="nav-link" data-scroll-target="#set-up-the-token">Set up the Token</a></li>
  <li><a href="#set-up-the-query" id="toc-set-up-the-query" class="nav-link" data-scroll-target="#set-up-the-query">Set up the Query</a></li>
  <li><a href="#collect-the-data" id="toc-collect-the-data" class="nav-link" data-scroll-target="#collect-the-data">Collect the data</a></li>
  </ul></li>
  <li><a href="#introduction-to-get-requests" id="toc-introduction-to-get-requests" class="nav-link" data-scroll-target="#introduction-to-get-requests">Introduction to GET requests</a>
  <ul class="collapse">
  <li><a href="#collect-openfda-data" id="toc-collect-openfda-data" class="nav-link" data-scroll-target="#collect-openfda-data">Collect OpenFDA Data</a></li>
  </ul></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference">Reference</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">



<section id="introduction-to-api-data-gathering" class="level1">
<h1>Introduction to API Data Gathering</h1>
<p>An API is a set of routines, protocols, and tools for building software applications. It specifies how software components should interact and isolates them from each other. This eases the development process as well as the reuse of code. APIs also offer a standard method of communication for software components and provide a controlled and managed access to data or resources for your API consumers. Data gathering is the process of collecting data from various sources to be used in research. The researcher must first define the goals of the research project in order to determine what type of data needs to be gathered. Data can be gathered through observations, surveys, interviews, experiments, or other means. After the data is collected, it must be analyzed to draw conclusions and make recommendations.</p>
<p>So, in this section, I will use API from Tweet to collect the data I want to use for future analysis.</p>
</section>
<section id="collect-tweet-data" class="level1">
<h1>Collect Tweet Data</h1>
<section id="set-up-the-token" class="level2">
<h2 class="anchored" data-anchor-id="set-up-the-token">Set up the Token</h2>
<p>API tokens are a bit like passwords in that they allow a user to authenticate with cloud apps. The main difference is that API tokens bypass two-step verification and SSO, and can also be used to retrieve data from the instance through REST APIs. Token controls allow admins to view and revoke the use of API tokens by their managed accounts. For example, if an admin wanted to view all the API tokens being used by their team, they could do so by going to the API token page in their control panel. If they saw that one of their team members was using an API token that they no longer needed, they could revoke it from their account. In this way, token controls give admins granular control over how API tokens are used within their organization.</p>
<p>Here, I will use my own token from my Tweeter Development Account to collect data.</p>
</section>
<section id="set-up-the-query" class="level2">
<h2 class="anchored" data-anchor-id="set-up-the-query">Set up the Query</h2>
<p>The search endpoints accept a single query with a GET request and return a set of historical Tweets that match the query. Queries are made up of operators that are used to match on a variety of Tweet attributes (Tweet, 2022).</p>
</section>
<section id="collect-the-data" class="level2">
<h2 class="anchored" data-anchor-id="collect-the-data">Collect the data</h2>
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="14">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>User ID</th>
      <th>Date</th>
      <th>Language</th>
      <th>Text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1569089016657768448</td>
      <td>2022-09-11 22:22:28+00:00</td>
      <td>en</td>
      <td>All the medical pain and all the taxes spent p...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1569088754559631365</td>
      <td>2022-09-11 22:21:26+00:00</td>
      <td>en</td>
      <td>A good way to clean up your follower list is t...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1569086451857358853</td>
      <td>2022-09-11 22:12:16+00:00</td>
      <td>en</td>
      <td>@1zzyzyx1 @MeidasTouch @CharlieCrist legalize ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1569086195786985472</td>
      <td>2022-09-11 22:11:15+00:00</td>
      <td>en</td>
      <td>RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1569085096400982016</td>
      <td>2022-09-11 22:06:53+00:00</td>
      <td>en</td>
      <td>@BabzOnTheMic Off the weed bro. Thatâ€™s 4 strai...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2495</th>
      <td>1567623803655835648</td>
      <td>2022-09-07 21:20:14+00:00</td>
      <td>en</td>
      <td>I just caught someone smoking their weed pen i...</td>
    </tr>
    <tr>
      <th>2496</th>
      <td>1567623191455215616</td>
      <td>2022-09-07 21:17:48+00:00</td>
      <td>en</td>
      <td>@AesPolitics And research shows black and brow...</td>
    </tr>
    <tr>
      <th>2497</th>
      <td>1567623151915343874</td>
      <td>2022-09-07 21:17:39+00:00</td>
      <td>en</td>
      <td>Smoke weed â€œ your not responsible and mentally...</td>
    </tr>
    <tr>
      <th>2498</th>
      <td>1567621220551507977</td>
      <td>2022-09-07 21:09:58+00:00</td>
      <td>en</td>
      <td>People who call weed, cannabis. https://t.co/m...</td>
    </tr>
    <tr>
      <th>2499</th>
      <td>1567621156726784002</td>
      <td>2022-09-07 21:09:43+00:00</td>
      <td>en</td>
      <td>You were coughing when you hit my weed, but Iâ€™...</td>
    </tr>
  </tbody>
</table>
<p>2500 rows Ã— 4 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="introduction-to-get-requests" class="level1">
<h1>Introduction to GET requests</h1>
<p>GET method is used to retrieve information from the given server using a given URI. The GET method sends the encoded user information appended to the page request.</p>
<section id="collect-openfda-data" class="level2">
<h2 class="anchored" data-anchor-id="collect-openfda-data">Collect OpenFDA Data</h2>
<p>OpenFDA is the first innovation led by Taha Kass-Hout, MD, MS, upon joining FDA as the first Chief Health Information Officer in March 2013. The goal of the project is to create easy access to public data, to create a new level of openness and accountability, to ensure the privacy and security of public FDA data, and ultimately to educate the public and save lives. The concept was to index high-value public-access data, format and document that data in developer and consumer-friendly standards, and make that data available via a public-access portal that enables developers to quickly and easily use it in applications (FDA, 2022).</p>
<div class="cell" data-execution_count="29">
<div class="cell-output cell-output-display" data-execution_count="29">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>safetyreportid</th>
      <th>transmissiondateformat</th>
      <th>transmissiondate</th>
      <th>serious</th>
      <th>seriousnessdeath</th>
      <th>receivedateformat</th>
      <th>receivedate</th>
      <th>receiptdateformat</th>
      <th>receiptdate</th>
      <th>fulfillexpeditecriteria</th>
      <th>...</th>
      <th>primarysourcecountry</th>
      <th>reporttype</th>
      <th>seriousnessdisabling</th>
      <th>duplicate</th>
      <th>reportduplicate</th>
      <th>seriousnessother</th>
      <th>occurcountry</th>
      <th>seriousnesshospitalization</th>
      <th>seriousnesslifethreatening</th>
      <th>seriousnesscongenitalanomali</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5801206-7</td>
      <td>102</td>
      <td>20090109</td>
      <td>1</td>
      <td>1</td>
      <td>102</td>
      <td>20080707</td>
      <td>102</td>
      <td>20080625</td>
      <td>1</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10003300</td>
      <td>102</td>
      <td>20141002</td>
      <td>1</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140306</td>
      <td>102</td>
      <td>20140306</td>
      <td>2</td>
      <td>...</td>
      <td>US</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>{'duplicatesource': 'GENENTECH', 'duplicatenum...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10003301</td>
      <td>102</td>
      <td>20141002</td>
      <td>1</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140228</td>
      <td>102</td>
      <td>20140228</td>
      <td>2</td>
      <td>...</td>
      <td>US</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'JANSSEN', 'duplicatenumb'...</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10003302</td>
      <td>102</td>
      <td>20141002</td>
      <td>2</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140312</td>
      <td>2</td>
      <td>...</td>
      <td>US</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'PFIZER', 'duplicatenumb':...</td>
      <td>NaN</td>
      <td>US</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10003304</td>
      <td>102</td>
      <td>20141212</td>
      <td>2</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140424</td>
      <td>2</td>
      <td>...</td>
      <td>US</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'PFIZER', 'duplicatenumb':...</td>
      <td>NaN</td>
      <td>US</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>495</th>
      <td>10003798</td>
      <td>102</td>
      <td>20141002</td>
      <td>1</td>
      <td>1</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140312</td>
      <td>1</td>
      <td>...</td>
      <td>US</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'BAXTER', 'duplicatenumb':...</td>
      <td>NaN</td>
      <td>US</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>496</th>
      <td>10003799</td>
      <td>102</td>
      <td>20141002</td>
      <td>1</td>
      <td>1</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140312</td>
      <td>1</td>
      <td>...</td>
      <td>IT</td>
      <td>2</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'BAXTER', 'duplicatenumb':...</td>
      <td>NaN</td>
      <td>IT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>497</th>
      <td>10003800</td>
      <td>102</td>
      <td>20141002</td>
      <td>2</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140312</td>
      <td>2</td>
      <td>...</td>
      <td>US</td>
      <td>2</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'ABBVIE', 'duplicatenumb':...</td>
      <td>NaN</td>
      <td>US</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>498</th>
      <td>10003801</td>
      <td>102</td>
      <td>20141002</td>
      <td>1</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140312</td>
      <td>1</td>
      <td>...</td>
      <td>FI</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'BAXTER', 'duplicatenumb':...</td>
      <td>1</td>
      <td>FI</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>499</th>
      <td>10003802</td>
      <td>102</td>
      <td>20141002</td>
      <td>1</td>
      <td>NaN</td>
      <td>102</td>
      <td>20140312</td>
      <td>102</td>
      <td>20140312</td>
      <td>1</td>
      <td>...</td>
      <td>CA</td>
      <td>1</td>
      <td>NaN</td>
      <td>1</td>
      <td>{'duplicatesource': 'BAXTER', 'duplicatenumb':...</td>
      <td>NaN</td>
      <td>CA</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>500 rows Ã— 26 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="reference" class="level1">
<h1>Reference</h1>
<p>About FDA. accessdata.fda.gov. (n.d.). Retrieved November 26, 2022, from https://www.accessdata.fda.gov/scripts/fdatrack/view/track_project.cfm?program=operations&amp;id=Operations-OIM-OpenFDA</p>
<p>Python requests get() method. Python Requests get Method. (n.d.). Retrieved November 26, 2022, from https://www.w3schools.com/python/ref_requests_get.asp</p>
<p>The code and downloaded dataset can be found <a href="https://github.com/anly501/anly-501-project-yanyanli0/tree/main/codes/01-data-gathering">here</a></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>