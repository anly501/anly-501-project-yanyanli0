<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.242">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>datacleaning_py</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="nav.js"></script>
<script src="datacleaning_Py_files/libs/clipboard/clipboard.min.js"></script>
<script src="datacleaning_Py_files/libs/quarto-html/quarto.js"></script>
<script src="datacleaning_Py_files/libs/quarto-html/popper.min.js"></script>
<script src="datacleaning_Py_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="datacleaning_Py_files/libs/quarto-html/anchor.min.js"></script>
<link href="datacleaning_Py_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="datacleaning_Py_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="datacleaning_Py_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="datacleaning_Py_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="datacleaning_Py_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction-to-data-cleaning" id="toc-introduction-to-data-cleaning" class="nav-link active" data-scroll-target="#introduction-to-data-cleaning">Introduction to Data Cleaning</a></li>
  <li><a href="#pre-review-of-dataset" id="toc-pre-review-of-dataset" class="nav-link" data-scroll-target="#pre-review-of-dataset">Pre review of Dataset</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#remove-unrelated-columns" id="toc-remove-unrelated-columns" class="nav-link" data-scroll-target="#remove-unrelated-columns">Remove unrelated columns</a></li>
  <li><a href="#choose-the-english-user" id="toc-choose-the-english-user" class="nav-link" data-scroll-target="#choose-the-english-user">Choose the English User</a></li>
  <li><a href="#check-empty-rows-in-dataset" id="toc-check-empty-rows-in-dataset" class="nav-link" data-scroll-target="#check-empty-rows-in-dataset">Check empty rows in dataset</a></li>
  <li><a href="#remove-the-duplicated-rows-in-dataset" id="toc-remove-the-duplicated-rows-in-dataset" class="nav-link" data-scroll-target="#remove-the-duplicated-rows-in-dataset">Remove the Duplicated rows in dataset</a></li>
  <li><a href="#count-the-words-before-cleaning-the-text" id="toc-count-the-words-before-cleaning-the-text" class="nav-link" data-scroll-target="#count-the-words-before-cleaning-the-text">Count the words before cleaning the text</a></li>
  <li><a href="#remove-the-punctuation-dights-symbols-hashtags-etc.-non-word-characters." id="toc-remove-the-punctuation-dights-symbols-hashtags-etc.-non-word-characters." class="nav-link" data-scroll-target="#remove-the-punctuation-dights-symbols-hashtags-etc.-non-word-characters.">Remove the punctuation, dights, symbols, hashtags etc. non-word characters.</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">



<section id="introduction-to-data-cleaning" class="level1">
<h1>Introduction to Data Cleaning</h1>
<p>Data cleaning is the process of fixing or removing incorrect, corrupted, incorrectly formatted, duplicate, or incomplete data within a dataset. Data cleaning is an important step in data analysis and data science, as it can help to ensure that results are accurate and reliable. There are many different approaches to data cleaning, and the best approach to use will often depend on the nature and size of the data set. However, some common data cleaning tasks include identifying and correcting errors, dealing with missing data, and identifying and removing duplicate records. data cleaning can be a time-consuming task, but it is essential for ensuring that data sets are fit for purpose.</p>
<p>In this section, I will use the tweet dataset that I collected from the last section and clean the it. Letâ€™s import some packages that will be used later</p>
<div class="cell" data-execution_count="28">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">### IMPORT PACKAGES </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> integrate</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> CountVectorizer</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> string</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.stem <span class="im">import</span> WordNetLemmatizer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pre-review-of-dataset" class="level1">
<h1>Pre review of Dataset</h1>
<div class="cell" data-execution_count="29">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#read csv tweet</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>tweet_df<span class="op">=</span>pd.read_csv(<span class="st">"./tweets_data_2500_USA.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>tweet_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="29">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>User ID</th>
      <th>Date</th>
      <th>Language</th>
      <th>Text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1569089016657768448</td>
      <td>2022-09-11 22:22:28+00:00</td>
      <td>en</td>
      <td>All the medical pain and all the taxes spent p...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1569088754559631365</td>
      <td>2022-09-11 22:21:26+00:00</td>
      <td>en</td>
      <td>A good way to clean up your follower list is t...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>1569086451857358853</td>
      <td>2022-09-11 22:12:16+00:00</td>
      <td>en</td>
      <td>@1zzyzyx1 @MeidasTouch @CharlieCrist legalize ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>1569086195786985472</td>
      <td>2022-09-11 22:11:15+00:00</td>
      <td>en</td>
      <td>RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>1569085096400982016</td>
      <td>2022-09-11 22:06:53+00:00</td>
      <td>en</td>
      <td>@BabzOnTheMic Off the weed bro. Thatâ€™s 4 strai...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2495</th>
      <td>2495</td>
      <td>1567623803655835648</td>
      <td>2022-09-07 21:20:14+00:00</td>
      <td>en</td>
      <td>I just caught someone smoking their weed pen i...</td>
    </tr>
    <tr>
      <th>2496</th>
      <td>2496</td>
      <td>1567623191455215616</td>
      <td>2022-09-07 21:17:48+00:00</td>
      <td>en</td>
      <td>@AesPolitics And research shows black and brow...</td>
    </tr>
    <tr>
      <th>2497</th>
      <td>2497</td>
      <td>1567623151915343874</td>
      <td>2022-09-07 21:17:39+00:00</td>
      <td>en</td>
      <td>Smoke weed â€œ your not responsible and mentally...</td>
    </tr>
    <tr>
      <th>2498</th>
      <td>2498</td>
      <td>1567621220551507977</td>
      <td>2022-09-07 21:09:58+00:00</td>
      <td>en</td>
      <td>People who call weed, cannabis. https://t.co/m...</td>
    </tr>
    <tr>
      <th>2499</th>
      <td>2499</td>
      <td>1567621156726784002</td>
      <td>2022-09-07 21:09:43+00:00</td>
      <td>en</td>
      <td>You were coughing when you hit my weed, but Iâ€™...</td>
    </tr>
  </tbody>
</table>
<p>2500 rows Ã— 5 columns</p>
</div>
</div>
</div>
<p>Above is our 2500 tweets that we collect from through Tweeter API. As we can see the dataset consists of 5 columns which are â€˜Unnamed: 0â€™ â€˜User ID Dateâ€™ â€˜Languageâ€™ and â€˜Textâ€™. Since, we only focus on the English user, post data and their tweets, I will remove the other unrelated columns.</p>
</section>
<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<section id="remove-unrelated-columns" class="level2">
<h2 class="anchored" data-anchor-id="remove-unrelated-columns">Remove unrelated columns</h2>
<div class="cell" data-execution_count="30">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#choose the columns</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>tweet_df<span class="op">=</span>tweet_df[[<span class="st">'Date'</span>,<span class="st">'Language'</span>,<span class="st">'Text'</span>]]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>tweet_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="30">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Language</th>
      <th>Text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-09-11 22:22:28+00:00</td>
      <td>en</td>
      <td>All the medical pain and all the taxes spent p...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-09-11 22:21:26+00:00</td>
      <td>en</td>
      <td>A good way to clean up your follower list is t...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-09-11 22:12:16+00:00</td>
      <td>en</td>
      <td>@1zzyzyx1 @MeidasTouch @CharlieCrist legalize ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-09-11 22:11:15+00:00</td>
      <td>en</td>
      <td>RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-09-11 22:06:53+00:00</td>
      <td>en</td>
      <td>@BabzOnTheMic Off the weed bro. Thatâ€™s 4 strai...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2495</th>
      <td>2022-09-07 21:20:14+00:00</td>
      <td>en</td>
      <td>I just caught someone smoking their weed pen i...</td>
    </tr>
    <tr>
      <th>2496</th>
      <td>2022-09-07 21:17:48+00:00</td>
      <td>en</td>
      <td>@AesPolitics And research shows black and brow...</td>
    </tr>
    <tr>
      <th>2497</th>
      <td>2022-09-07 21:17:39+00:00</td>
      <td>en</td>
      <td>Smoke weed â€œ your not responsible and mentally...</td>
    </tr>
    <tr>
      <th>2498</th>
      <td>2022-09-07 21:09:58+00:00</td>
      <td>en</td>
      <td>People who call weed, cannabis. https://t.co/m...</td>
    </tr>
    <tr>
      <th>2499</th>
      <td>2022-09-07 21:09:43+00:00</td>
      <td>en</td>
      <td>You were coughing when you hit my weed, but Iâ€™...</td>
    </tr>
  </tbody>
</table>
<p>2500 rows Ã— 3 columns</p>
</div>
</div>
</div>
<p>Therefore, we got 3 columns after removing unrelated columns</p>
</section>
<section id="choose-the-english-user" class="level2">
<h2 class="anchored" data-anchor-id="choose-the-english-user">Choose the English User</h2>
<div class="cell" data-execution_count="31">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#choose language = en only </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>tweet_df<span class="op">=</span>tweet_df[tweet_df[<span class="st">'Language'</span>]<span class="op">==</span><span class="st">'en'</span>]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tweet_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="31">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Language</th>
      <th>Text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-09-11 22:22:28+00:00</td>
      <td>en</td>
      <td>All the medical pain and all the taxes spent p...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-09-11 22:21:26+00:00</td>
      <td>en</td>
      <td>A good way to clean up your follower list is t...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-09-11 22:12:16+00:00</td>
      <td>en</td>
      <td>@1zzyzyx1 @MeidasTouch @CharlieCrist legalize ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-09-11 22:11:15+00:00</td>
      <td>en</td>
      <td>RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-09-11 22:06:53+00:00</td>
      <td>en</td>
      <td>@BabzOnTheMic Off the weed bro. Thatâ€™s 4 strai...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2495</th>
      <td>2022-09-07 21:20:14+00:00</td>
      <td>en</td>
      <td>I just caught someone smoking their weed pen i...</td>
    </tr>
    <tr>
      <th>2496</th>
      <td>2022-09-07 21:17:48+00:00</td>
      <td>en</td>
      <td>@AesPolitics And research shows black and brow...</td>
    </tr>
    <tr>
      <th>2497</th>
      <td>2022-09-07 21:17:39+00:00</td>
      <td>en</td>
      <td>Smoke weed â€œ your not responsible and mentally...</td>
    </tr>
    <tr>
      <th>2498</th>
      <td>2022-09-07 21:09:58+00:00</td>
      <td>en</td>
      <td>People who call weed, cannabis. https://t.co/m...</td>
    </tr>
    <tr>
      <th>2499</th>
      <td>2022-09-07 21:09:43+00:00</td>
      <td>en</td>
      <td>You were coughing when you hit my weed, but Iâ€™...</td>
    </tr>
  </tbody>
</table>
<p>2500 rows Ã— 3 columns</p>
</div>
</div>
</div>
<p>Since there are still 2500 rows, all of the tweets are posted by English Users.</p>
</section>
<section id="check-empty-rows-in-dataset" class="level2">
<h2 class="anchored" data-anchor-id="check-empty-rows-in-dataset">Check empty rows in dataset</h2>
<div class="cell" data-execution_count="32">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check if any NaN in the df</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>tweet_df.isna().<span class="bu">any</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>Date        False
Language    False
Text        False
dtype: bool</code></pre>
</div>
</div>
<p>There is no empty row in the dataset so we are good to go.</p>
</section>
<section id="remove-the-duplicated-rows-in-dataset" class="level2">
<h2 class="anchored" data-anchor-id="remove-the-duplicated-rows-in-dataset">Remove the Duplicated rows in dataset</h2>
<div class="cell" data-execution_count="33">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove duplicated rows</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>tweet_df<span class="op">=</span> tweet_df.drop_duplicates()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>tweet_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="33">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Language</th>
      <th>Text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-09-11 22:22:28+00:00</td>
      <td>en</td>
      <td>All the medical pain and all the taxes spent p...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-09-11 22:21:26+00:00</td>
      <td>en</td>
      <td>A good way to clean up your follower list is t...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-09-11 22:12:16+00:00</td>
      <td>en</td>
      <td>@1zzyzyx1 @MeidasTouch @CharlieCrist legalize ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-09-11 22:11:15+00:00</td>
      <td>en</td>
      <td>RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-09-11 22:06:53+00:00</td>
      <td>en</td>
      <td>@BabzOnTheMic Off the weed bro. Thatâ€™s 4 strai...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2495</th>
      <td>2022-09-07 21:20:14+00:00</td>
      <td>en</td>
      <td>I just caught someone smoking their weed pen i...</td>
    </tr>
    <tr>
      <th>2496</th>
      <td>2022-09-07 21:17:48+00:00</td>
      <td>en</td>
      <td>@AesPolitics And research shows black and brow...</td>
    </tr>
    <tr>
      <th>2497</th>
      <td>2022-09-07 21:17:39+00:00</td>
      <td>en</td>
      <td>Smoke weed â€œ your not responsible and mentally...</td>
    </tr>
    <tr>
      <th>2498</th>
      <td>2022-09-07 21:09:58+00:00</td>
      <td>en</td>
      <td>People who call weed, cannabis. https://t.co/m...</td>
    </tr>
    <tr>
      <th>2499</th>
      <td>2022-09-07 21:09:43+00:00</td>
      <td>en</td>
      <td>You were coughing when you hit my weed, but Iâ€™...</td>
    </tr>
  </tbody>
</table>
<p>2500 rows Ã— 3 columns</p>
</div>
</div>
</div>
<p>There is no duplicated row in the dataset</p>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get tweet</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>tweet<span class="op">=</span>tweet_df[<span class="st">'Text'</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>tweet[:<span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>0     All the medical pain and all the taxes spent p...
1     A good way to clean up your follower list is t...
2     @1zzyzyx1 @MeidasTouch @CharlieCrist legalize ...
3     RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...
4     @BabzOnTheMic Off the weed bro. Thatâ€™s 4 strai...
5     @IEngageApp My dog + Pain meds, prilocaine (nu...
6                    I need weed but I canâ€™t get uppppp
7                             this weed hit different ðŸ’š
8     RT @snoopdoggslungz: ðŸ“¸ Chem D\nðŸŒ±(ig) https://t...
9     Iâ€™m not used to a nigga not having hella weed ...
10    RT @CAL_FIRE: #MillFire off Woodridge Court an...
11    @Ac7ionMann Depends....is that weed behind you...
12    @amberdawn4444 @SpaceXplorer11 Interesting tha...
13    #MSOGang 0Cannabis retail: Shrinkage ahead Â» s...
14    @kathbarbadoro I just finished lunch and smoke...
15    @Tumble____weed @Emrys_Angel i cant lol but i ...
16    that first hit of weed after the gym sends me ...
17    Yes no criminalization for using weed https://...
18    I would be getting sober at the exact time som...
19    Celebrated Athletes, Musicians and Cannabis Al...
Name: Text, dtype: object</code></pre>
</div>
</div>
</section>
<section id="count-the-words-before-cleaning-the-text" class="level2">
<h2 class="anchored" data-anchor-id="count-the-words-before-cleaning-the-text">Count the words before cleaning the text</h2>
<p>Letâ€™s count each word amount 2500 tweets</p>
<div class="cell" data-execution_count="35">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count each word</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>vectorizer_before<span class="op">=</span>CountVectorizer()</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>before  <span class="op">=</span>  vectorizer_before.fit_transform(tweet)   </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>vocabulary_before<span class="op">=</span>vectorizer_before.vocabulary_</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>vocabulary_before <span class="op">=</span> {k: v <span class="cf">for</span> k, v <span class="kw">in</span> <span class="bu">sorted</span>(vocabulary_before.items(), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>],reverse<span class="op">=</span><span class="va">True</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="51">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># distribution of frequency count for the first 20 words</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> plt.figure()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>f.set_figwidth(<span class="dv">10</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>f.set_figheight(<span class="dv">6</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Word Counts for First 20 words'</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Word'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="bu">list</span>(vocabulary_before.keys())[:<span class="dv">20</span>],<span class="bu">list</span>(vocabulary_before.values())[:<span class="dv">20</span>])</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="datacleaning_Py_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Above picture is the distribution of first 20 words.</p>
<div class="cell" data-execution_count="37">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># random 20 words</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(vectorizer_before.get_feature_names_out())[:<span class="dv">150</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>['00', '000', '0001', '002wsiszo2', '00ensfupua', '00usd', '01yhjge9yb', '03kxndbiws', '0600', '08', '08krz2qf6r', '08krz2qmvz', '08wwsbpzqm', '09', '0ahww5s89w', '0cannabis', '0cy4xp2tyo', '0sk5yurcld', '0tkok78k6o', '0whlv4ae2k', '0wtobhtc20', '0wvvwn3exm', '0xactivx', '0xuu0wcofc', '10', '100', '1000', '100000000', '10009', '100pcs', '100zillion', '101', '1011', '107sfkttno', '10am', '10ft', '10k', '10kusd', '10million', '10th', '10x', '11', '113', '113b', '118', '11am', '11krkts', '11pm', '11th', '12', '120', '122', '122usd', '12th', '12vvrqk7rk', '13', '130', '14', '140l8ioigx', '143vinyldotcom', '15', '150m', '15eepzquvn', '15mg', '16', '161', '165', '167', '17', '1744195', '18', '180', '18306', '1835974', '1844', '185668232', '1887', '18g', '19', '190', '1933', '1960s', '1970s', '1974', '1980', '1987', '1990s', '1996biggs', '1999', '1afyxaksy8', '1dmhhlf9fr', '1etzm5bbk2', '1f8fzlkhmj', '1fiycpyc2q', '1fsukoqhuf', '1g', '1glswczxby', '1gyn52lgnq', '1j0bhsaf32', '1ji1l5v6xb', '1kz3qi3oyg', '1lj607uj8q', '1m', '1qycnqw0hh', '1s61vkxzsc', '1st', '1vdfgoszcj', '1vp2s47ujp', '1w48yr818q', '1xudzktwvz', '1zzyzyx1', '20', '200', '2000', '2007', '200x', '201', '2010', '2011', '2014', '2016', '2018', '2019', '2020', '2021', '2022', '2023', '2024', '205', '20yr', '21', '210', '2188', '21andup', '21s', '21st', '22', '2240', '22gejup627', '23', '23hahpok6r', '24', '2497', '24ghgvb9jw', '24th', '25', '250', '250k', '250mg', '250usd']</code></pre>
</div>
</div>
<p>This is the random 20 words. Based on the distribution and word list, we can see there are a lot of numbers and some non sense words in the list and distribution. So, I am going to remove these words and numbers in the next step</p>
</section>
<section id="remove-the-punctuation-dights-symbols-hashtags-etc.-non-word-characters." class="level2">
<h2 class="anchored" data-anchor-id="remove-the-punctuation-dights-symbols-hashtags-etc.-non-word-characters.">Remove the punctuation, dights, symbols, hashtags etc. non-word characters.</h2>
<div class="cell" data-execution_count="38">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#code from https://towardsdatascience.com/cleaning-text-data-with-python-b69b47b97b76</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the punctuation, dights, symbols, hashtags etc. non-word characters.</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>stop_words <span class="op">=</span> stopwords.words(<span class="st">"english"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>wordnet <span class="op">=</span> WordNetLemmatizer()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> text_preproc(x):</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> x.lower()</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> <span class="st">' '</span>.join([word <span class="cf">for</span> word <span class="kw">in</span> x.split(<span class="st">' '</span>) <span class="cf">if</span> word <span class="kw">not</span> <span class="kw">in</span> stop_words])</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> x.encode(<span class="st">'ascii'</span>, <span class="st">'ignore'</span>).decode()</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="vs">r'https*\S+'</span>, <span class="st">' '</span>, x)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="vs">r'@\S+'</span>, <span class="st">' '</span>, x)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="vs">r'#\S+'</span>, <span class="st">' '</span>, x)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="vs">r'\'\w+'</span>, <span class="st">''</span>, x)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="st">'[</span><span class="sc">%s</span><span class="st">]'</span> <span class="op">%</span> re.escape(string.punctuation), <span class="st">' '</span>, x)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="vs">r'\w*\d+\w*'</span>, <span class="st">''</span>, x)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> re.sub(<span class="vs">r'\s{2,}'</span>, <span class="st">' '</span>, x)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>tweet_df[<span class="st">'clean_text'</span>] <span class="op">=</span> tweet_df[<span class="st">'Text'</span>].<span class="bu">apply</span>(text_preproc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="39">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count each word after cleaning</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>vectorizer_after<span class="op">=</span>CountVectorizer(stop_words<span class="op">=</span><span class="st">'english'</span>,analyzer <span class="op">=</span> <span class="st">'word'</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>after  <span class="op">=</span>  vectorizer_after.fit_transform(tweet_df[<span class="st">'clean_text'</span>])</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>vocabulary_after<span class="op">=</span>vectorizer_after.vocabulary_</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>vocabulary_after <span class="op">=</span> {k: v <span class="cf">for</span> k, v <span class="kw">in</span> <span class="bu">sorted</span>(vocabulary_after.items(), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>],reverse<span class="op">=</span><span class="va">True</span>)}   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="40">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#the first 150 words</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>vocabulary_after<span class="op">=</span>vectorizer_after.vocabulary_</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(vectorizer_after.get_feature_names_out())[:<span class="dv">150</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>['aahn', 'aaron', 'ab', 'abc', 'ability', 'able', 'abolished', 'abolitionism', 'abortion', 'abortions', 'abroad', 'absolute', 'absolutely', 'abt', 'abundance', 'abuse', 'abusers', 'accept', 'acceptable', 'accepted', 'accepts', 'access', 'accessory', 'accident', 'accomplished', 'according', 'account', 'accountant', 'accounts', 'accretive', 'accumulate', 'accurately', 'accustomed', 'ace', 'achieved', 'achievement', 'achievements', 'acid', 'acquiring', 'acquisition', 'acre', 'acres', 'acro', 'act', 'acted', 'acting', 'action', 'actions', 'active', 'activist', 'activists', 'activities', 'activity', 'actual', 'actually', 'ad', 'adam', 'adapter', 'add', 'added', 'adderall', 'addict', 'addicted', 'addiction', 'addictions', 'addictive', 'addicts', 'additionally', 'additives', 'addre', 'address', 'addressing', 'adelanto', 'adequate', 'adhd', 'adjustments', 'admin', 'administration', 'admiring', 'admission', 'admitted', 'adolescents', 'adult', 'adulting', 'adults', 'advance', 'advanced', 'adventure', 'advertising', 'advice', 'advisor', 'advisory', 'advocate', 'advocated', 'advocating', 'aew', 'af', 'afc', 'affected', 'affects', 'affiliated', 'affiliation', 'affirm', 'afford', 'affordable', 'affordably', 'aficionado', 'afraid', 'african', 'afro', 'afternoon', 'afterparty', 'afterschool', 'ag', 'age', 'ageism', 'agency', 'agenda', 'aggressive', 'aging', 'ago', 'agree', 'agreed', 'agreement', 'agrees', 'agricultural', 'agriculture', 'ahead', 'ahem', 'ahhh', 'ahhs', 'ai', 'aid', 'aids', 'aileen', 'ain', 'ainn', 'aint', 'air', 'airbnb', 'airplane', 'airport', 'ak', 'aka', 'al', 'alabama', 'alabaman', 'alarm', 'albert', 'alberta']</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># distribution of frequency of first 20 word</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> plt.figure()</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>f.set_figwidth(<span class="dv">10</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>f.set_figheight(<span class="dv">6</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Word Counts for First 20 words'</span>, fontsize<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Word'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="bu">list</span>(vocabulary_after.keys())[:<span class="dv">20</span>],<span class="bu">list</span>(vocabulary_after.values())[:<span class="dv">20</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>&lt;BarContainer object of 20 artists&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="datacleaning_Py_files/figure-html/cell-15-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>After removing all the punctuation, dights, symbols, hashtags, non-word characters etc. we can see the word list and distribution are more clearly now</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>